# SmenaOplati

Телеграм-бот для отправки запросов `changepayment` с поддержкой одиночного и массового запуска, работы через прокси и сохранения шаблонов поездок.

## Запуск
1. Установите зависимости (версии теперь закреплены в `requirements.txt`):
   ```bash
   pip install -r requirements.txt
   ```
2. Создайте файл `cfg.py` в корне проекта со строкой с токеном бота:
   ```python
   TOKEN_BOTA = "ваш_telegram_token"
   ```
3. При необходимости добавьте прокси в `proxy.txt` (по одному в строке). Если файл пустой или отсутствует, бот будет работать без прокси.
4. Запустите бота одной из версий:
   ```bash
   python main.py   # основная версия
   # или
   python bot2.py   # альтернативная версия меню
   ```

### Настройка путей под Windows и Linux
- Все файлы по умолчанию берутся относительно каталога проекта (`main.py`).
- При необходимости пути можно переопределить через переменные окружения:
  - `BOT_DB_PATH` — путь к основной БД бота (`bot.db`).
  - `MIKE_DB_PATH` — путь к БД заказов (`db/DB.bd`).
  - `PROXY_FILE_PATH` — путь к файлу с прокси (`proxy.txt`).
  Используйте абсолютный или относительный путь, удобный для вашей системы.

## Основные возможности
- Одиночная отправка запроса changepayment.
- Массовая отправка с настраиваемыми потоками и количеством запросов.
- Автодобавление аккаунта в базу по token2: бот сам парсит `id` и `card-x`, сохраняет их в поездку с названием, совпадающим с token2.
- Ведение логов запросов в SQLite.
- Управление и подстановка прокси из файла `proxy.txt`.
- Сохранение и загрузка шаблонов поездок.
- Праздничный интерфейс: все кнопки и основные ответы дополнены новогодними эмодзи.

## Дополнительно
- База данных создаётся автоматически в файле `bot.db`.
- Для массовых запросов используется асинхронная отправка с ограничением по потокам.

## Лицензия
Проект распространяется под лицензией Apache License 2.0. Текст лицензии доступен в файле [`LICENSE`](LICENSE).
